<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" type="image/x-icon" href="/images/SiSt.ico">
<title>2026. 2. 9. 오후 12:26:13</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<link rel="stylesheet" href="/resources/cdn-main/example.css">
<script src="/resources/cdn-main/example.js"></script>
<style>
 span.material-symbols-outlined{
    vertical-align: text-bottom;
 }   
</style>
<style>    
 .pagination li{
   display: inline-block; 
 }
 .pagination li.active a{
   color: red;
 }
</style>
</head>
<body>
<header>
  <h1 class="main"><a href="#" style="position: absolute;top:30px;">CHacHa's HOme</a></h1>
  <ul>
    <li><a href="#">로그인</a></li>
    <li><a href="#">회원가입</a></li>
  </ul>
</header>
<div>
  <xmp class="code"> 
    /guestbook/list.html
  </xmp>
  
  <h1>
   <span>
     <a th:href="@{/guestbook/register}">
       <button type="button">REGISTER</button>
     </a>
   </span>
   GuestBook List Page
  </h1>
  
  <table>
    <caption>
      <form action="/guestbook/list" method="get" id="searchForm">
        <div>
          <input type="hidden" name="page" value="1">
          <div>
            <select name="type">
              <option th:selected="${pageRequestDTO.type == null}">-----</option>
              <option value="t" th:selected="${pageRequestDTO.type == 't'}">제목</option>
              <option value="c" th:selected="${pageRequestDTO.type == 'c'}">내용</option>
              <option value="w" th:selected="${pageRequestDTO.type == 'w'}">작성자</option>
              <option value="tc" th:selected="${pageRequestDTO.type == 'tc'}">제목+내용</option>
              <option value="tcw" th:selected="${pageRequestDTO.type == 'tcw'}">제목+내용+작성자</option>
            </select>
            <input name="keyword" th:value="${pageRequestDTO.keyword}">
            
            <button type="button" class="btn-search">Search</button>
            <button type="button" class="btn-clear">Clear</button>
          </div>
        </div>
      </form>
    </caption>
    <thead>
      <tr>
        <th>#</th>
        <th>Title</th>
        <th>Writer</th>
        <th>Regdate</th>
      </tr>
    </thead>
    <tbody>
      <tr th:each="dto : ${result.dtoList}">
        <td>[[${dto.gno}]]</td>
        <td>
          <a th:href="@{/guestbook/read(gno=${dto.gno}, page=${result.page}, size=${result.size}, type=${pageRequestDTO.type}, keyword=${pageRequestDTO.keyword})}">[[${dto.title}]]</a>
        </td>
        <td>[[${dto.writer}]]</td>
        <td>[[${#temporals.format(dto.regDate, 'yyyy/MM/dd')}]]</td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td colspan="4" align="center">
          <ul class="pagination">
            <li th:if="${result.prev}">
              <a th:href="@{/guestbook/list(page=${result.start-1}, size=${result.size}, type=${pageRequestDTO.type}, keyword=${pageRequestDTO.keyword})}">Prev</a>
            </li>
            <li th:each="page : ${result.pageList}" th:class="${result.page == page ? 'active': ''}">
              <a th:href="@{/guestbook/list(page=${page}, size=${result.size}, type=${pageRequestDTO.type}, keyword=${pageRequestDTO.keyword})}">[[${page}]]</a>
            </li>
            <li th:if="${result.next}">
              <a th:href="@{/guestbook/list(page=${result.end+1}, size=${result.size}, type=${pageRequestDTO.type}, keyword=${pageRequestDTO.keyword})}">Next</a>
            </li>
          </ul>
        </td>
      </tr>
    </tfoot>
  </table>

<script th:inline="javascript">
  // th:inline="javascript" 자바스크립트 코딩 안의 
  // 타임리프 코드를 해석할 수 있도록 하는 옵션 속성이다.
  // js 코드 안의 서버 데이타(변수)를 안전하게 치환해 주는 역할.
  // 예) '홍길동' 치환
  var msg = [[${msg}]];  
  console.log( msg );
  if(msg){
   alert("[모달창]"+ msg + "번 글 등록/삭제!!!");
  }  
</script>
<script th:inline="javascript">
   var searchForm = $("#searchForm");
   // <button type="button" class="btn-search">Search</button>
   $(".btn-search").on("click", function (){
	   searchForm.submit();
   });
   // <button type="button" class="btn-clear">Clear</button>
   $(".btn-clear").on("click", function (){
	   searchForm.empty().submit();
   });
</script>  
</div>
</body>
</html>



